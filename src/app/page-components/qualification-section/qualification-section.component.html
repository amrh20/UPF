<mat-expansion-panel [expanded]="false" [disabled]="section.body.details.source =='HRMS' || isReadOnly"
  (opened)="getSegmentDetails(section?.body?.details?.qualificationSegment?.name , true)" class="margTop">
  <mat-expansion-panel-header>
    <mat-panel-title>

      <div class="d-flex align-items-center">
        <span>
          {{i18n.translate('qualification')}}
        </span>
        <span class="mx-4">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16.826"
            height="16.826" viewBox="0 0 16.826 16.826">
            <defs>
              <clipPath id="clip-path">
                <path id="Path_9532" data-name="Path 9532"
                  d="M267.413-231a8.413,8.413,0,0,1,8.413,8.413,8.411,8.411,0,0,1-4.506,7.453h0l-.652-1.241a7.009,7.009,0,0,0,3.756-6.211,7.011,7.011,0,0,0-7.011-7.011,7.011,7.011,0,0,0-7.011,7.011,7.012,7.012,0,0,0,6.31,6.976h0v-5.574h1.4v7.011h-.7A8.413,8.413,0,0,1,259-222.587,8.413,8.413,0,0,1,267.413-231Zm1.052,5.609v2.1h-2.1v-2.1Z"
                  fill="#fff" clip-rule="evenodd" />
              </clipPath>
              <clipPath id="clip-path-2">
                <path id="Path_9531" data-name="Path 9531" d="M259-214.174h16.826V-231H259Z"
                  transform="translate(-259 231)" fill="#fff" />
              </clipPath>
            </defs>
            <g id="Group_10531" data-name="Group 10531" transform="translate(-259 231)" clip-path="url(#clip-path)">
              <g id="Group_10530" data-name="Group 10530" transform="translate(259 -231)" clip-path="url(#clip-path-2)">
                <path id="Path_9530" data-name="Path 9530" d="M254-236h20.833v20.833H254Z"
                  transform="translate(-256.003 233.997)" fill="#000" />
              </g>
            </g>
          </svg>
        </span>
      </div>
    </mat-panel-title>
  </mat-expansion-panel-header>
  <div *ngIf="section?.body?.details?.qualificationSegment && section?.body?.details?.qualificationSegment?.qualification &&
     section?.body?.details?.qualificationSegment?.qualification?.length >= 0">
    <mat-card class="example-card"
      *ngFor="let qualification of getFilteredList (section?.body?.details?.qualificationSegment?.qualification); let i=index">
      <mat-card-header class="custom-card-head">
        <div class="d-flex justify-content-between align-items-center w-100">
          <div class="">
            <label for="" class="m-0"> {{qualification.educationLevel.value}} {{qualification.startDate | date :'dd/MM/yyyy'}}
              - {{qualification.graduatedDate | date :'dd/MM/yyyy'}}
            </label>
          </div>
          <div class="d-flex">
            <button *ngIf="!isReadOnly " (click)="edit('editqualificationSegment'  , i , qualification)"
              data-toggle="modal" data-target="#qualificationPopup" data-backdrop="static" data-keyboard="false"
              class="edit-button px-4 mx-3">
              <span>
                <span class="svg">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14.281" height="14.23" viewBox="0 0 14.281 14.23">
                    <path id="Path_9540" data-name="Path 9540" d="M17.745,6.987,15.3,4.542a1.785,1.785,0,0,0-2.374-.062L4.892,12.512a1.785,1.785,0,0,0-.509,1.08L4,17.315a.89.89,0,0,0,.893.973h.08l3.722-.339a1.785,1.785,0,0,0,1.08-.509l8.033-8.033a1.714,1.714,0,0,0-.062-2.419ZM8.534,16.163l-2.678.25L6.1,13.735,11.14,8.755l2.41,2.41ZM14.71,9.969,12.318,7.577l1.741-1.785L16.5,8.228Z" transform="translate(-3.996 -4.058)" fill="#1cced8"/>
                  </svg>
                </span>
                Edit
              </span>
            </button>
            <button *ngIf="!isReadOnly " (click)="deleteGenericRow('qualificationSegment', 'qualification'  , i)"
            class="square-btn delete">
              <svg xmlns="http://www.w3.org/2000/svg" id="Group_10788" data-name="Group 10788" width="13.819" height="13.819" viewBox="0 0 13.819 13.819">
                   <path id="Path_9541" data-name="Path 9541" d="M12.955,17.608H7.1a1.653,1.653,0,0,1-1.65-1.494L4.5,6.608A.552.552,0,0,1,5.053,6H15a.553.553,0,0,1,.55.608L14.6,16.114a1.653,1.653,0,0,1-1.65,1.494ZM5.663,7.106,6.551,16a.552.552,0,0,0,.55.5h5.854a.552.552,0,0,0,.55-.5l.888-8.9Z" transform="translate(-3.118 -3.789)" fill="#ff375e"/>
                   <path id="Path_9542" data-name="Path 9542" d="M15.267,7.106H2.553A.553.553,0,0,1,2.553,6H15.267a.553.553,0,0,1,0,1.106Z" transform="translate(-2 -3.789)" fill="#ff375e"/>
                   <path id="Path_9543" data-name="Path 9543" d="M14.053,17.186a.553.553,0,0,1-.553-.553V10.553a.553.553,0,0,1,1.106,0v6.081A.553.553,0,0,1,14.053,17.186Z" transform="translate(-7.143 -5.578)" fill="#ff375e"/>
                   <path id="Path_9544" data-name="Path 9544" d="M10.1,17.186a.553.553,0,0,1-.55-.5L9,10.6a.553.553,0,1,1,1.1-.1l.553,6.081a.553.553,0,0,1-.551.6Z" transform="translate(-5.13 -5.578)" fill="#ff375e"/>
                   <path id="Path_9545" data-name="Path 9545" d="M17.553,17.187a.553.553,0,0,1-.551-.6l.553-6.081a.553.553,0,1,1,1.1.1L18.1,16.684A.553.553,0,0,1,17.553,17.187Z" transform="translate(-8.708 -5.578)" fill="#ff375e"/>
                   <path id="Path_9546" data-name="Path 9546" d="M14.528,5.317H9.553A.553.553,0,0,1,9,4.764V2.553A.553.553,0,0,1,9.553,2h4.975a.553.553,0,0,1,.553.553V4.764A.553.553,0,0,1,14.528,5.317ZM10.106,4.211h3.869V3.106H10.106Z" transform="translate(-5.131 -2)" fill="#ff375e"/>
                 </svg>
            </button>
          </div>
        </div>


      </mat-card-header>
      <mat-card-content class="custom-card-content">

        <div class="row">
          <div class="col-3">
            <span class="custom-label">
              {{i18n.translate('universityInstitute')}} :
            </span>

          </div>
          <div class="col-9">
            <span class="custom-details"> {{qualification?.universityInstitute?.value}} </span>

          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="custom-label"> {{i18n.translate('country')}} : </span>

          </div>
          <div class="col-9">
            <span class="custom-details"> {{qualification?.country?.value}}</span>

          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="custom-label"> {{i18n.translate('city')}} : </span>

          </div>
          <div class="col-9">
            <span class="custom-details"> {{qualification?.city?.value}}</span>

          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="custom-label">{{i18n.translate('major')}} : </span>

          </div>
          <div class="col-9">
            <span class="custom-details"> {{qualification?.major?.value}}</span>

          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="custom-label"> {{i18n.translate('subMajor')}}:</span>

          </div>
          <div class="col-9">
            <span class="custom-details">{{qualification?.subMajor?.value}}</span>

          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="custom-label"> {{i18n.translate('scale')}}:</span>

          </div>
          <div class="col-9">
            <span class="custom-details"> {{qualification?.scale?.value}}</span>

          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="custom-label"> {{i18n.translate('gpa')}} : </span>

          </div>
          <div class="col-9">
            <span class="custom-details">{{qualification?.gpa}}</span>

          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="custom-label">
              {{i18n.translate('certificate')}} :
            </span>

          </div>
          <div class="col-9">
            <app-attachment [hasLabel]="true" [field]="qualification?.certificate" name="certificate"
              [hasColumnBreak]="true" [required]="true" [isReadOnly]="true">
            </app-attachment>
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="custom-label"> {{i18n.translate('evaluationNo')}}: </span>

          </div>
          <div class="col-9">
            <span class="custom-details"> {{qualification?.evaluationNo}}</span>

          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="custom-label">{{i18n.translate('evaluationDate')}}: </span>

          </div>
          <div class="col-sm-8">
            <span class="custom-details"> {{qualification?.evaluationDate | date :'dd/MM/yyyy'}}</span>

          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="custom-label"> {{i18n.translate('evaluationCertificate')}}:</span>

          </div>
          <div class="col-9">
            <app-attachment [hasLabel]="true" [field]="qualification?.evaluationCertificate"
              name="evaluationCertificate" [hasColumnBreak]="true" [required]="true" [isReadOnly]="true">
            </app-attachment>
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="custom-label"> {{i18n.translate('note')}}:</span>

          </div>
          <div class="col-9">
            <span class="custom-details"> {{qualification?.note}}</span>
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="custom-label">{{i18n.translate('justification')}}:</span>

          </div>
          <div class="col-9">
            <span class="custom-details"> {{qualification?.justification}}</span>

          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
  <div *ngIf="section?.body?.details?.qualificationSegment && section?.body?.details?.qualificationSegment?.qualification &&
        section?.body?.details?.qualificationSegment?.qualification?.length >= 0"
    style="position: relative;top: 11px;text-align: end;">
    <button class="btn-primary tableButtonPad px-5 m-3" id="itemDetails" data-backdrop="static" data-keyboard="false"
      (click)="openPopUp('qualificationSegment')" data-toggle="modal" data-target="#qualificationPopup">
     
      <span class="d-flex align-items-center"> 
        <span class="mx-2 mb-2">
             <svg xmlns="http://www.w3.org/2000/svg" width="18" height="33" viewBox="0 0 18 33">
          <text id="_" data-name="+" transform="translate(0 27)" fill="#fff" font-size="25" font-family="SegoeUI, Segoe UI"><tspan x="0" y="0">+</tspan></text>
        </svg></span>
        <span> {{i18n.translate('addNewQualification')}}</span>
</span>
    </button>
  </div>
</mat-expansion-panel>
<div class="row">
  <div class="modal fade" id="qualificationPopup" tabindex="-1" role="dialog" aria-labelledby="qualificationPopupLabel"
    aria-hidden="true">
    <div class="modal-dialog  modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header d-flex justify-content-center">

          <div>
            <h4 class="center modal-title orgchart">{{i18n.translate('qualification')}}</h4>
          </div>

          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true" (click)="close()">
              <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 35 35">
                <g id="Group_16490" data-name="Group 16490" transform="translate(-724.833 -20)">
                  <rect id="Rectangle_2209" data-name="Rectangle 2209" width="35" height="35" transform="translate(724.833 20)" fill="#f3f3f1"/>
                  <path id="Icon_ionic-ios-close" data-name="Icon ionic-ios-close" d="M21.179,19.285l5.713-5.713A1.339,1.339,0,0,0,25,11.678l-5.713,5.713-5.713-5.713a1.339,1.339,0,1,0-1.893,1.893l5.713,5.713L11.679,25a1.339,1.339,0,0,0,1.893,1.893l5.713-5.713L25,26.892A1.339,1.339,0,1,0,26.892,25Z" transform="translate(723.496 18.711)"/>
                </g>
              </svg>
            </span>
          </button>
          
        </div>
        <div class="modal-body">
          <app-qualification-popup-details [section]="section" [lov]="lov"></app-qualification-popup-details>
        </div>
        <div class="modal-footer d-flex justify-content-center pb-3">
            <button class="btn-secondary" data-dismiss="modal" aria-label="Close"
              *ngIf="(this.qualificationType != 'editqualificationSegment' )" (click)="close()"><span>Discard</span></button>
            <button class="btn-secondary mx-4" data-dismiss="modal" aria-label="Close" [disabled]="!formisvalid()"
              (click)="update()"><span>Update</span></button>
        </div>
      </div>
    </div>
  </div>
</div>
